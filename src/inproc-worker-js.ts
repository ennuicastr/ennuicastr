/* THIS FILE IS GENERATED AUTOMATICALLY. DO NOT EDIT. */
export const js = "data:application/javascript,!function()%7B%22use%20strict%22%0Aclass%20t%7Bconstructor(t%2Ce)%7Bthis.port%3Dt%2Cthis.ondata%3De%2Ct.onmessage%3Dthis.onmessage.bind(this)%7Donmessage(t)%7Bconst%20e%3Dt.data%0Aif(e.length)this.ondata(Date.now()%2Ce)%0Aelse%20if(%22buffers%22%3D%3D%3De.c)%7Bconst%20t%3Dthis.incoming%3De.buffers%0Athis.incomingH%3De.head%0Aconst%20s%3Dthis.waitWorker%3Dnew%20Worker(%22data%3Aapplication%2Fjavascript%2C%22%2BencodeURIComponent(%22%5Cnonmessage%20%3D%20function(ev)%20%7B%5Cn%20%20%20%20var%20buf%20%3D%20ev.data%3B%5Cn%20%20%20%20var%20prevVal%20%3D%20Atomics.load(buf%2C%200)%3B%5Cn%20%20%20%20while%20(Atomics.wait(buf%2C%200%2C%20prevVal))%20%7B%5Cn%20%20%20%20%20%20%20%20var%20ts%20%3D%20Date.now()%3B%5Cn%20%20%20%20%20%20%20%20var%20newVal%20%3D%20Atomics.load(buf%2C%200)%3B%5Cn%20%20%20%20%20%20%20%20if%20(prevVal%20!%3D%3D%20newVal)%20%7B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20postMessage(%5Bts%2C%20prevVal%2C%20newVal%5D)%3B%5Cn%20%20%20%20%20%20%20%20%20%20%20%20prevVal%20%3D%20newVal%3B%5Cn%20%20%20%20%20%20%20%20%7D%5Cn%20%20%20%20%7D%5Cn%7D%3B%5Cn%22))%0Areturn%20s.onmessage%3De%3D%3E%7Bconst%5Bs%2Ci%2Ca%5D%3De.data%0Aif(Atomics.load(this.incomingH%2C0)%2Ca%3Ci)%7Bconst%20e%3Da-i%2Bt%5B0%5D.length%2Cn%3Dt%5B0%5D.length-i%2Cr%3D%5B%5D%0Afor(let%20s%3D0%3Bs%3Ct.length%3Bs%2B%2B)%7Bconst%20h%3Dnew%20Float32Array(e)%0Ah.set(t%5Bs%5D.subarray(i)%2C0)%2Ch.set(t%5Bs%5D.subarray(0%2Ca)%2Cn)%2Cr.push(h)%7Dthis.ondata(s%2Cr)%7Delse%20this.ondata(s%2Ct.map((t%3D%3Et.slice(i%2Ca))))%7D%2Cvoid%20s.postMessage(this.incomingH)%7D%7D%7Dconst%20e%3D%22undefined%22!%3Dtypeof%20SharedArrayBuffer%26%26(-1%3D%3D%3Dnavigator.userAgent.indexOf(%22Safari%22)%7C%7C-1!%3D%3Dnavigator.userAgent.indexOf(%22Chrome%22))%2Cs%3D96e3%0Aclass%20i%7Bconstructor(t%2Ce%3D!1)%7Bthis.port%3Dt%2Cthis.waitForInit%3De%2Cthis.tryShared%3D!0%2Cthis._initialized%3D!1%2Cthis.outgoing%3Dnull%2Cthis.outgoingH%3Dnull%2Cthis._initialized%3D!e%2Ce%26%26(t.addEventListener(%22message%22%2Cthis.onmessage.bind(this))%2Ct.start())%7Dsend(t)%7Bif(!this._initialized)return%0Aconst%20i%3Dt%5B0%5D.length%0Aif(e%26%26this.tryShared%26%26!this.outgoing)%7Bthis.outgoing%3D%5B%5D%0Afor(let%20e%3D0%3Be%3Ct.length%3Be%2B%2B)this.outgoing.push(new%20Float32Array(new%20SharedArrayBuffer(384e3)))%0Athis.outgoingH%3Dnew%20Int32Array(new%20SharedArrayBuffer(4))%2Cthis.port.postMessage(%7Bc%3A%22buffers%22%2Cbuffers%3Athis.outgoing%2Chead%3Athis.outgoingH%7D)%7Dif(e%26%26this.tryShared)%7Blet%20e%3Dthis.outgoingH%5B0%5D%0Aif(e%2Bi%3Es)%7Bconst%20i%3Ds-e%0Afor(let%20s%3D0%3Bs%3Cthis.outgoing.length%3Bs%2B%2B)this.outgoing%5Bs%5D.set(t%5Bs%25t.length%5D.subarray(0%2Ci)%2Ce)%2Cthis.outgoing%5Bs%5D.set(t%5Bs%25t.length%5D.subarray(i)%2C0)%7Delse%20for(let%20s%3D0%3Bs%3Cthis.outgoing.length%3Bs%2B%2B)this.outgoing%5Bs%5D.set(t%5Bs%25t.length%5D%2Ce)%0Ae%3D(e%2Bi)%25s%2CAtomics.store(this.outgoingH%2C0%2Ce)%2CAtomics.notify(this.outgoingH%2C0)%7Delse%20this.port.postMessage(t)%7Donmessage(t)%7Bconst%20e%3Dt.data%0Ae%26%26%22out%22%3D%3D%3De.c%26%26(this.tryShared%3D!!e.tryShared%2Cthis._initialized%3D!0)%7D%7Dfunction%20a(t%2Ce)%7Be.addEventListener(%22message%22%2C(s%3D%3E%7Bconst%20i%3Ds.data%0Aif(!i)return%0Aif(%22tee%22%3D%3D%3Di.c)return%20void%20a(t%2Ci.args%5B0%5D)%0Aif(%22rpc%22!%3D%3Di.c%26%26%22rpcv%22!%3D%3Di.c)return%0Aconst%20n%3Dt%5Bi.f%5D%0Aif(!n)return%0Aconst%20r%3D%7Bc%3A%22rpcRet%22%2Cid%3Ai.id%7D%0Atry%7Br.ret%3Dn.apply(t%2Ci.args)%7Dcatch(t)%7Br.ex%3Dt%7Dfunction%20h()%7Bif(%22rpcv%22%3D%3D%3Di.c)return%20void(r.ex%26%26console.error(%22Unhandled%20exception%3A%22%2Cr.ex))%0Alet%20t%3D%5B%5D%0Ar.ret%26%26r.ret.transfer%3F(t%3Dr.ret.transfer%2C%22return%22in%20r.ret%26%26(r.ret%3Dr.ret.return))%3Ar.ex%26%26r.ex.transfer%26%26(t%3Dr.ex.transfer%2C%22return%22in%20r.ex%26%26(r.ex%3Dr.ex.return))%0Atry%7Be.postMessage(r%2Ct)%7Dcatch(s)%7Br.ex%3D%22%22%2Br.ex%2Ce.postMessage(r%2Ct)%7D%7Dr.ret%26%26r.ret.then%3Fr.ret.then((t%3D%3Er.ret%3Dt)).catch((t%3D%3Er.ex%3Dt)).then(h)%3Ah()%7D))%0Aconst%20s%3De%0As.start%26%26s.start()%7Dconst%20n%3Dfunction(t)%7Breturn%20a(t%2C%22undefined%22!%3Dtypeof%20globalThis%3FglobalThis%3Aself)%7D%0Anew%20FinalizationRegistry((t%3D%3Et._clean()))%0Aconst%20r%3Dclass%7Bconstructor(t)%7Bthis._port%3Dt%2Cthis._idx%3D0%2Cthis._res%3D%7B%7D%2Cthis._rej%3D%7B%7D%2Ct.addEventListener(%22message%22%2Cthis._onmessage.bind(this))%0Aconst%20e%3Dt%0Ae.start%26%26e.start()%7Drpc(t%2Ce%2Cs)%7Breturn%20this._rpc(%22rpc%22%2C!0%2Ct%2Ce%2Cs)%7Drpcv(t%2Ce%2Cs)%7Bthis._rpc(%22rpcv%22%2C!1%2Ct%2Ce%2Cs)%7Dtee()%7Bconst%20t%3Dnew%20MessageChannel%0Areturn%20this._rpc(%22tee%22%2C!1%2C%22tee%22%2C%5Bt.port2%5D%2C%5Bt.port2%5D)%2Ct.port1%7D_rpc(t%2Ce%2Cs%2Ci%2Ca%3D%5B%5D)%7Bconst%20n%3Dthis._idx%2B%2B%0Alet%20r%0Areturn%20e%26%26(r%3Dnew%20Promise(((t%2Ce)%3D%3E%7Bthis._res%5Bn%5D%3Dt%2Cthis._rej%5Bn%5D%3De%7D)))%2Cthis._port.postMessage(%7Bc%3At%2Cf%3As%2Cid%3An%2Cargs%3Ai%7D%2Ca)%2Cr%7D_onmessage(t)%7Bif(!t%7C%7C!t.data)return%0Aconst%20e%3Dt.data.id%2Cs%3D%22ex%22in%20t.data%3Fthis._rej%5Be%5D%3Athis._res%5Be%5D%0Adelete%20this._res%5Be%5D%2Cdelete%20this._rej%5Be%5D%2Cs%26%26s(%22ex%22in%20t.data%3Ft.data.ex%3At.data.ret)%7D%7D%2Ch%3D640%0An(new%20class%7Bconstructor()%7Bthis._ser%3DPromise.all(%5B%5D)%2Cthis._ready%3D!1%2Cthis._baseURL%3D%22%22%2Cthis._inSampleRate%3D48e3%2Cthis._renderSampleRate%3D48e3%2Cthis._vadStep%3D0%2Cthis._useEC%3D!0%2Cthis._useNR%3D!0%2Cthis._sentRecently%3D!1%2Cthis._useTranscription%3D!1%2Cthis._channel%3D-1%2Cthis._lastVadSensitivity%3D0%2Cthis._vadSensitivity%3D0%2Cthis._vadNoiseGate%3D0%2Cthis._vadNoiseGateLvl%3D0%2Cthis._triggerVadCeil%3D0%2Cthis._triggerVadFloor%3D0%2Cthis._curVadVolume%3D0%2Cthis._curVadPeak%3D0%2Cthis._lastVolume%3D0%2Cthis._lastPeak%3D0%2Cthis._rawVadLvl%3D0%2Cthis._rawVadOn%3D!1%2Cthis._rtcVadOn%3D!1%2Cthis._vadOn%3D!1%2Cthis._max%3D0%2Cthis._maxCtr%3D0%2Cthis._vad%3Dnull%2Cthis._vadHandleLo%3D0%2Cthis._vadHandleHi%3D0%2Cthis._vadDataPtr%3D0%2Cthis._bi%3D0%2Cthis._specBleachBufSize%3D0%2Cthis._timeout%3Dnull%2Cthis._rtcTimeout%3Dnull%2Cthis._vosk%3D%7Bmodel%3Anull%2Crecognizer%3Anull%2CinSamples%3A0%2CinTime%3A0%2CoutTime%3A0%7D%7Dinit(e)%7Bthis._reverse%3Dnew%20r(e.reverse)%2Cthis._ready%3D!1%2Cthis._baseURL%3De.baseURL%2Cthis._inSampleRate%3De.inSampleRate%2Cthis._renderSampleRate%3De.renderSampleRate%2Cthis._vadStep%3De.inSampleRate%2F32e3%2Cthis.setOpts(e)%2Cthis._outHandler%3Dnew%20i(e.output%2C!0)%2Ce.ecOutput%26%26(this._ecOutHandler%3Dnew%20i(e.ecOutput%2C!0))%2Cthis._inHandler%3Dnew%20t(e.input%2Cthis.ondata.bind(this))%2Cthis._renderHandler%3Dnew%20t(e.renderInput%2Cthis.onRenderData.bind(this))%2Cthis._ser%3Dthis._ser.catch(console.error).then((async()%3D%3E%7B__filename%3D%60%24%7Be.baseURL%7D%2F..%2Flibs%2Fwebrtcvad.js%60%2CimportScripts(__filename)%0Aconst%20t%3Dthis._vad%3Dawait%20WebRtcVad()%2Cs%3De%3D%3E%7Bconst%20s%3Dt.Create()%0Aif(0%3D%3D%3Ds)throw%20new%20Error%0Aif(t.Init(s)%3C0)throw%20new%20Error%0Areturn%20t.set_mode(s%2Ce)%2Cs%7D%0Athis._vadHandleLo%3Ds(this._vadSensitivity)%2Cthis._lastVadSensitivity%3Dthis._vadSensitivity%2Cthis._vadHandleHi%3Ds(3)%2Cthis._vadDataPtr%3Dt.malloc(1280)%2Cthis._vadBuf%3Dnew%20Int16Array(t.HEAPU8.buffer%2Cthis._vadDataPtr%2C1280)%2C__filename%3D%60%24%7Be.baseURL%7D%2F..%2Flibs%2Fwebrtcaec3-0.3.0.js%60%2CimportScripts(__filename)%2Cthis._AEC3%3Dawait%20WebRtcAec3()%2C__filename%3D%60%24%7Be.baseURL%7D%2F..%2Flibs%2Flibspecbleach-0.1.7-js2.js%60%2CimportScripts(__filename)%2Cthis._SpecBleach%3Dawait%20LibSpecBleach.LibSpecBleach()%2Ce.useTranscription%26%26(__filename%3D%60%24%7Be.baseURL%7D%2F..%2Flibs%2Fvosk.js%3Fv%3D3%60%2CimportScripts(__filename))%2Ce.useTranscription%26%26this.loadVosk()%2Cthis._ready%3D!0%7D))%7DsetOpts(t)%7Bvoid%200!%3D%3Dt.useEC%26%26(this._useEC%3Dt.useEC)%2Cvoid%200!%3D%3Dt.useNR%26%26(this._useNR%3Dt.useNR)%2Cvoid%200!%3D%3Dt.sentRecently%26%26(this._sentRecently%3Dt.sentRecently)%2Cvoid%200!%3D%3Dt.useTranscription%26%26(this._useTranscription%3Dt.useTranscription)%2Cvoid%200!%3D%3Dt.channel%26%26(this._channel%3Dt.channel)%2Cvoid%200!%3D%3Dt.vadSensitivity%26%26(this._vadSensitivity%3Dt.vadSensitivity)%2Cvoid%200!%3D%3Dt.vadNoiseGate%26%26(this._vadNoiseGate%3Dt.vadNoiseGate%2Cthis._vadNoiseGateLvl%3DMath.pow(10%2Ct.vadNoiseGate%2F20))%7Dondata(t%2Ce)%7Bthis._ready%26%26(this._ser%3Dthis._ser.catch(console.error).then((async()%3D%3E%7Blet%20s%0Aif(this._channel%3E%3D0%26%26e.length%3Ethis._channel)s%3De%5Bthis._channel%5D%0Aelse%7Bs%3De%5B0%5D%0Aconst%20t%3De.length%0Aif(1!%3D%3Dt)%7Bfor(let%20i%3D1%3Bi%3Ct%3Bi%2B%2B)%7Bconst%20t%3De%5Bi%5D%0Afor(let%20e%3D0%3Be%3Cs.length%3Be%2B%2B)s%5Be%5D%2B%3Dt%5Be%5D%7Dfor(let%20e%3D0%3Be%3Cs.length%3Be%2B%2B)s%5Be%5D%2F%3Dt%7D%7Dlet%20i%3Ds%0Aif(this._AEC3%26%26!this._aec3%26%26(this._aec3%3Dnew%20this._AEC3.AEC3(48e3%2C1%2C1)%2Cthis._aec3Opts%3D%7BsampleRateIn%3Athis._inSampleRate%2CsampleRateOut%3Athis._inSampleRate%7D%2Cthis._aec3AnalyzeOpts%3D%7BsampleRateIn%3Athis._renderSampleRate%7D)%2Cthis._aec3)%7Bconst%20t%3D%5Bs%5D%2Ce%3Dthis._aec3.processSize(t%2Cthis._aec3Opts)%0A!e%7C%7Cthis._aec3Output%26%26this._aec3Output.length%3D%3D%3De%7C%7C(this._aec3Output%3Dnew%20Float32Array(e))%2Cthis._aec3.process(%5Bthis._aec3Output%5D%2Ct%2Cthis._aec3Opts)%2Ci%3De%3Fthis._aec3Output%3Anew%20Float32Array(0)%7Dthis._ecOutHandler%26%26this._ecOutHandler.send(%5Bi%5D)%0Alet%20a%3Di%0A!this._useEC%26%26this._useNR%26%26(a%3Ds)%2Cthis._specBleachBufSize%26%26a.length%25this._specBleachBufSize%3D%3D0%7C%7C(this._aec3%26%26a%3D%3D%3Di%3F(this._specBleachBufSize%3D~~(this._inSampleRate%2F100)%2Ca.length%26%26a.length%25this._specBleachBufSize!%3D0%26%26(this._specBleachBufSize%3Da.length))%3Athis._specBleachBufSize%3Da.length)%0Alet%20n%3Da%0Aif(!this._SpecBleach%7C%7Cthis._specBleach%26%26this._specBleach.input_buffer.length%3D%3D%3Dthis._specBleachBufSize%7C%7C(this._specBleach%26%26this._specBleach.free()%2Cthis._specBleach%3Dnew%20this._SpecBleach.SpecBleach(%7Badaptive%3A!0%2Cblock_size%3Athis._specBleachBufSize%2Csample_rate%3Athis._inSampleRate%2Creduction_amount%3A20%2Cwhitening_factor%3A50%7D))%2Cthis._specBleach)%7B(!this._nroutput%7C%7Cthis._nroutput.length%3Ca.length)%26%26(this._nroutput%3Dnew%20Float32Array(a.length))%0Afor(let%20t%3D0%3Bt%3Ca.length%3Bt%2B%3Dthis._specBleachBufSize)this._specBleach.process(a.subarray(t%2Ct%2Bthis._specBleachBufSize)%2Cthis._nroutput.subarray(t%2Ct%2Bthis._specBleachBufSize))%0An%3Dthis._nroutput.subarray(0%2Ca.length)%7Dlet%20r%3Dthis._rawVadLvl%2Co%3Dthis._rawVadOn%0Afor(let%20t%3D0%3Bt%3Cn.length%3Bt%2B%3Dthis._vadStep)%7Bconst%20e%3Dn%5B~~t%5D%2Cs%3DMath.abs(e)%0Aif(this._curVadVolume%2B%3Ds%2Cs%3Ethis._curVadPeak%26%26(this._curVadPeak%3Ds)%2Cthis._vadBuf%5Bthis._bi%2B%2B%5D%3D32767*e%2Cthis._bi%3D%3Dh)%7Bif(this._lastVadSensitivity!%3D%3Dthis._vadSensitivity%26%26(this._vad.set_mode(this._vadHandleLo%2Cthis._vadSensitivity)%2Cthis._lastVadSensitivity%3Dthis._vadSensitivity)%2Cthis._rawVadLvl%3Dr%3Dthis._vad.Process(this._vadHandleLo%2C32e3%2Cthis._vadDataPtr%2Ch)%2Bthis._vad.Process(this._vadHandleHi%2C32e3%2Cthis._vadDataPtr%2Ch)%2Co%3D!!r%2Cthis._bi%3D0%2C2%3D%3D%3Dr)%7Bconst%20t%3Dthis._curVadVolume%2Fh%0At%3Ethis._triggerVadCeil%3Fthis._triggerVadCeil%3Dt%3Athis._triggerVadCeil%3D(1023*this._triggerVadCeil%2Bt)%2F1024%7Delse%20if(0%3D%3D%3Dr)%7Bconst%20t%3Dthis._curVadVolume%2Fh*2%0Athis._triggerVadFloor%3D(511*this._triggerVadFloor%2Bt)%2F512%7Dthis._lastVolume%3Dthis._curVadVolume%2Cthis._curVadVolume%3D0%2Cthis._lastPeak%3Dthis._curVadPeak%2Cthis._curVadPeak%3D0%7D%7Dif(o%26%26(r%3C2%7C%7Cthis._vadSensitivity%3E%3D3))%7Bconst%20t%3Dthis._lastVolume%2Fh%0Ao%3D!1%2Ct%3E%3Dthis._triggerVadFloor%26%26(this._triggerVadCeil%3C2*this._triggerVadFloor%7C%7Ct-this._triggerVadFloor%3E%3D(this._triggerVadCeil-this._triggerVadFloor)%2F32)%26%26(o%3D!0)%7Do%26%26this._vadNoiseGate%3E-100%26%26this._lastPeak%3Cthis._vadNoiseGateLvl%26%26(o%3D!1)%2Co%3F(this._rtcVadOn%3Fthis._rtcTimeout%26%26(clearTimeout(this._rtcTimeout)%2Cthis._rtcTimeout%3Dnull)%3Athis._rtcVadOn%3D!0%2Cthis._timeout%26%26(clearTimeout(this._timeout)%2Cthis._timeout%3Dnull)%2Cthis._rawVadOn%7C%7C(this._rawVadOn%3D!0%2Cthis._vadOn%3D!0%2Cthis._curVadVolume%3D0))%3A(this._rtcVadOn%26%26(this._rtcTimeout%7C%7C(this._rtcTimeout%3DsetTimeout((()%3D%3E%7Bthis._rtcTimeout%3Dnull%2Cthis._rtcVadOn%3D!1%7D)%2C1e3)))%2Cthis._rawVadOn%26%26(this._rawVadOn%3D!1%2Cthis._timeout%7C%7C(this._timeout%3DsetTimeout((()%3D%3E%7Bthis._timeout%3Dnull%2Cthis._vadOn%3D!1%7D)%2C2e3))))%0Afor(let%20t%3D0%3Bt%3Cs.length%3Bt%2B%2B)%7Blet%20e%3Ds%5Bt%5D%0Ae%3C0%26%26(e%3D-e)%2Ce%3Ethis._max%26%26(this._max%3De)%2C%2B%2Bthis._maxCtr%3E%3D1024%26%26(this.max(this._max)%2Cthis._max%3Dthis._maxCtr%3D0)%7Dthis.vadState(this._rawVadOn%2Cthis._rtcVadOn%2Cthis._vadOn)%0A%7Blet%20t%3Ds%0Aif(this._useNR%3Ft%3Dn%3Athis._useEC%26%26(t%3Di)%2Ct.length)%7Bconst%20s%3D%5B%5D%0Afor(this._sentRecently%7C%7C(t%3Dt.slice(0)%2Ct.fill(0))%3Bs.length%3Ce.length%3B)s.push(t.slice(0))%0Athis._outHandler.send(s)%7D%7Dthis._useTranscription%26%26this._vosk.recognizer%26%26(this._vosk.inSamples%2B%3Ds.length%2Cthis._vosk.inTime%3Dthis._vosk.inSamples%2Fthis._inSampleRate%2Cthis._vosk.outTime%3Dt%2F1e3%2Cthis._vosk.recognizer.acceptWaveformFloat(s%2Cthis._inSampleRate))%7D)))%7DonRenderData(t%2Ce)%7Bthis._aec3%26%26this._aec3.analyze(e%2Cthis._aec3AnalyzeOpts)%7Dasync%20vadState(t%2Ce%2Cs)%7Bthis._reverse.rpcv(%22vadState%22%2C%5Bt%2Ce%2Cs%5D)%7Dasync%20max(t)%7Bthis._reverse.rpcv(%22max%22%2C%5Bt%5D)%7Dasync%20transcription(t%2Ce)%7Bthis._reverse.rpcv(%22transcription%22%2C%5Bt%2Ce%5D)%7Dasync%20loadVosk()%7Bconst%20t%3Dthis._vosk%2Ce%3Dawait%20Vosk.createModel(%60%24%7Bthis._baseURL%7D%2F..%2Flibs%2Fvosk-model-small-en-us-0.15.tar.gz%60)%0At.model%3De%2Ct.recognizer%3Dnew%20t.model.KaldiRecognizer(this._inSampleRate)%2Ct.recognizer.setWords(!0)%2Ct.recognizer.on(%22partialresult%22%2C(t%3D%3E%7Bthis.voskResult(t%2C!1)%7D))%2Ct.recognizer.on(%22result%22%2C(t%3D%3E%7Bthis.voskResult(t%2C!0)%7D))%7DvoskResult(t%2Ce)%7Bconst%20s%3Dt.result%0Aif((!e%7C%7C%22%22!%3D%3Ds.text)%26%26(e%7C%7C%22%22!%3D%3Ds.partial))%7Bif(s.result)%7Bconst%20t%3Dthis._vosk%2Ce%3Dt.outTime-t.inTime%0Afor(const%20t%20of%20s.result)t.start%2B%3De%2Ct.end%2B%3De%7Dthis.transcription(s%2Ce)%7D%7D%7D)%7D()%0A";
